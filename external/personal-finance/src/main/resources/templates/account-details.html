<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="#{accounts.form.edit.title}">Edit account</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker3.css">
    <link href="/css/dashboard.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="/images/my-logo.png" th:href="@{/images/my-logo.png}"/>
</head>
<header th:insert="blocks/header.html :: menu"></header>
<body>


<div class="container mt-5 mb-3">

    <h1 th:text="#{accounts.form.edit.heading}">Edit account</h1>
    <form th:object="${account}" th:method="put">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <label for="Name" th:text="#{accounts.form.name}">Name</label>
        <input type="text" th:field="*{name}" id="name" name="name" class="form-control"
               th:placeholder="#{accounts.form.name}"><br>
        <p class="md-text-danger" th:each="error: ${#fields.errors('name')}"
           th:text="${error}">Validation error</p>

        <div th:if="${errorMessage}" class="md-text-danger">
            <div th:text="${errorMessage}"></div>
        </div>
        <label for="description" th:text="#{accounts.form.description}">Description</label>
        <input type="text" name="description" id="description" th:field="*{description}"
               class="form-control" th:placeholder="#{accounts.form.description}"><br>
        <label for="type" th:text="#{accounts.form.type}">Type</label><br>
        <select id="type" name="type">
            <option value="null"></option>
            <option th:each="i : ${accountTypes}" th:value="${i.name}" th:text="${i.name}"
                    th:selected="${i==account.type}"></option>
        </select><br><br>

        <label for="currency" th:text="#{accounts.form.currency}">Currency</label><br>
        <select id="currency" th:field="*{currency}">
            <option th:each="c : ${currencies}" th:value="${c}" th:text="${c}"></option>
        </select><br><br>
        <p class="md-text-danger" th:each="error: ${#fields.errors('currency')}"
           th:text="${error}">Validation error</p>

        <label for="description" th:text="#{accounts.form.currentBalance}">Current balance</label>

        <input type="text" name="balance" id="balance" th:field="*{balance}"
               class="form-control" readonly th:placeholder="#{accounts.form.currentBalance}">
        <br>
            <a th:href="'/accounts/'+ ${account.id} +'/editbalance'"  class="btn md-btn md-btn-info" role="button"
               th:text="#{accounts.form.editBalance}">Edit balance</a>
        <br><br>


        <button type="submit" class="btn md-btn md-btn-success" th:text="#{common.save}">Save</button>

    </form>
    <br>

    <form th:action="@{/accounts/__${account.id}__}" th:method="delete" th:object="${account}">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <button type="submit" class="btn md-btn md-btn-danger"
                th:text="#{accounts.form.delete}">Delete account</button>
    </form>

    <br>


</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="Stylesheet"
      type="text/css"/>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/js/bootstrap-datepicker.min.js"></script>

</body>
</html>
